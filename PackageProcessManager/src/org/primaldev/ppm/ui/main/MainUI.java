package org.primaldev.ppm.ui.main;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.navigator.View;
import com.vaadin.navigator.ViewChangeListener.ViewChangeEvent;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;

public class MainUI extends CustomComponent implements View {

	@AutoGenerated
	private AbsoluteLayout mainLayout;

	@AutoGenerated
	private Label MainView;

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */
	

	/**
	 * The constructor should first build the main layout, set the
	 * composition root and then do any custom initialization.
	 *
	 * The constructor will not be automatically regenerated by the
	 * visual editor.
	 */
	public MainUI() {
		

		// TODO add user code here
	}

	@Override
	public void enter(ViewChangeEvent event) {

		try {
			if (getSession().getAttribute("user") == null) {
				Notification.show("Bad User",
			            "You should not be here",
			            Notification.Type.TRAY_NOTIFICATION);
				
			}else{
				Notification.show("Welcome",
						(String) getSession().getAttribute("user"),
			            Notification.Type.HUMANIZED_MESSAGE);
			}
			
		} catch (Exception e) {
			// TODO Auto-generated catch block
			
		}
		

		
		buildMainLayout();
		setCompositionRoot(mainLayout);
		
	}

	@AutoGenerated
	private AbsoluteLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new AbsoluteLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("100%");
		mainLayout.setHeight("100%");
		
		// top-level component properties
		setWidth("100.0%");
		setHeight("100.0%");
		
		// MainView
		MainView = new Label();
		MainView.setImmediate(false);
		MainView.setWidth("-1px");
		MainView.setHeight("-1px");
		MainView.setValue("Main View");
		mainLayout.addComponent(MainView, "top:180.0px;left:200.0px;");
		
		return mainLayout;
	}

}
